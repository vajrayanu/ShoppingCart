@using Ouikum.Quotation;
@using Ouikum.Company;
@using Ouikum;
@using res = Prosoft.Resource.Web.Ouikum;
    <table class="table table-hover grid">
    <tbody style="border-top: 1px solid #DEDEDE;">
     
    @if (ViewBag.TotalRow <= 0 || ViewBag.TotalRow == null)
    {
        <tr class="nodata b" valign="middle">
            <td><div align="center">@res.Common.lblNotFound</div></td>
        </tr>
    }
    else
    {
        var TCompView = 0; var TProduct = 0; var TProductView = 0; var TContact = 0; var TPrice = 0; var TTel = 0;
        foreach (var item in (List<view_CompanyContact>)ViewBag.Company)
        {
        <tr class="body">
            <td style="vertical-align:middle;width:10%">
                @item.CompCode
            </td>
            @{
              var urlcomplink = "";
              switch(item.WebID){
                  case 1: urlcomplink = "http://B2BThai.com"; break;
                             
                                 default: break;
              }
           string url = ""; 
           //if (Prosoft.Base.Base.AppLang == "en-US") { url = "en/"; }
           //else { url = ""; }
                   }

            <td style="width:20%"><a target="_blank" class="fl_l" href="@Url.Content(urlcomplink+"/"+url+"CompanyWebsite/" + @Url.ReplaceUrl(item.CompName) + "/Main/Index/" + item.CompID + "")" title="@item.CompName" >@(item.CompName)</a></td>
            <td class="span1 " style="text-align:right;padding-right:20px">
                   @{TCompView += Convert.ToInt32(item.CompViewCount); }
                   @item.CompViewCount
            </td>
            <td class="span1" style="text-align:right;padding-right:20px">
                    @{TContact += Convert.ToInt32(item.ContactCount); }
                    @item.ContactCount
            </td>
            <td class="span1 " style="text-align:right;padding-right:20px;width:30px">
                   @{TProduct += Convert.ToInt32(item.ProductCount); }
                   @item.ProductCount
            </td>
            <td class="span1" style="text-align:right;padding-right:20px">
                    @{TProductView += Convert.ToInt32(item.ProductViewCount); }
                   @item.ProductViewCount
            </td>
            <td class="span1" style="text-align:right;padding-right:20px">
                    @{TTel += Convert.ToInt32(item.TelCount); }
                    @item.TelCount
            </td>
            
            <td class="span1" style="text-align:right;padding-right:20px">
                    @{TPrice += Convert.ToInt32(item.QuoCount); }
                    @item.QuoCount
                </td>
        </tr>
        }
        <tr class="b">
            <td></td>
            <td>@res.Common.lblTotal</td>
            <td id="TotalCompView" style="text-align:right;padding-right:20px">@TCompView</td>
            <td id="TotalContact" style="text-align:right;padding-right:20px">@TContact</td>
            <td id="TotalProduct" style="text-align:right;padding-right:20px">@TProduct</td>
            <td id="TotalProductView" style="text-align:right;padding-right:20px">@TProductView</td>
            <td id="TotalTel" style="text-align:right;padding-right:20px">@TTel</td>
            <td id="TotalRequestPrice" style="text-align:right;padding-right:20px">@TPrice</td>
        </tr>
    }
    </tbody>
</table>
@Html.Partial("UC/Grid/PagingPostUC")
<script type="text/javascript">
    $(function () {
        OpenLoading(false);
    });
</script>
